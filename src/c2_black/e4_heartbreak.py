# -*- coding: utf-8 -*-
"""Episode: 2-4.失恋
"""
## path
import os
import sys
sys.path.append(os.path.join(os.path.dirname(__file__), '../..'))
sys.path.append('storybuilder')
## local libs
from storybuilder.builder.world import World
from storybuilder.builder.writer import Writer


## define alias
W = Writer
_ = W.getWho()


## scenes
def sc_lookingaurora(w: World):
    nocht, asahi = W(w.nocht), W(w.asahi)
    return w.scene("オーロラは見えなかった",
            w.symbol("　　　　１０"),
            nocht.be("結局一泊しただけでキャンプ場を引き上げ、自宅に戻った"),
            nocht.do("ベッドに寝転がりながら端末を頭上に翳す",
                "仕事に出かける前に彼女が送りつけたらしきメッセージを再度呼び出し、そこにある言葉をなぞった"),
            asahi.voice("あの絵で一つ気になったことがあるの",
                "$nochtの見たというオーロラは何色だったの？"),
            w.eventPoint("オーロラの色", "$asahiがオーロラの色は何色と尋ねた"),
            nocht.think("オーロラの色を訊いてどうするのだろう",
                "オーロラに色は無い", "科学的知識のある彼女なら$Sよりもずっとその仕組みをよく理解しているはずだ"),
            _.do("端末を置き、棚の上に飾った昨日のスケッチを見やる",
                "湖を取り囲む緑と、水面に写し取られた緑", "そこに強烈なコントラストとして太陽のような色彩の女性が立つ",
                "彼女に降り注ぐオーロラは輝きながら空を揺らめいている",
                "そこに描き込まれた光の帯を眺めやり、$Sは思うのだ"),
            nocht.think("――オーロラに色は無いよ"),
            _.do("返信をしておいて、$Sはテーブルに置いたコーヒーの残りを口にする",
                "棚に置いた鏡が自分の無精髭の顔を写していて、この二週間ほど仕事で詰めていたから全く剃っていなかったことを思い出した"),
            _.do("彼女は仕事に戻ったのだろう",
                "メッセージが返ってこないことを確認すると、$Sは洗面所に向かう"),
            _.do("鏡の右下に斜めにヒビが入り、天井には蜘蛛の巣が張っている", "コップに一本だけ入れた歯ブラシは毛先が大きく曲がり、もうそろそろ買い替えてくれと訴えていた",
                "手にした電気カミソリを、顎に沿わせる",
                "ジリジリとした音が自分の一部を刈り取っていく",
                "鏡の中の$Sはその様子を真剣な眼差しで見つめている",
                "その目を見ながら自分と$asahiとの関係について今一度、考えが巡る"),
            nocht.think("――前に神についてどう考えているのか、という質問があったことを覚えているだろうか？",
                "今日は時間があるからいつものような曖昧な回答じゃなくて、ちゃんとした考えを述べてみるよ"),
            _.do("髭を剃り終えると、今度は前髪を整える",
                "後ろが頚椎の三番目の辺りまで伸びてしまっていて、そろそろカットした方がいいと思えたが、",
                "生憎と今日は休業日だ"),
            _.think("――神の存在を科学的にどうこう言うつもりはないけれど、例えば森に入った時、目を閉じて眠りに入ろうとする時、",
                "夜道を歩いている時でもいい",
                "君は感じたことはないだろうか", "誰かの視線を"),
            _.do("整髪料でサイドを撫で付け、額から頭頂部に掛けてやや立たせる",
                "ＣＧなら眉毛や髪型だけでなく、目の色や大きさ、形、鼻の造形、唇の厚さや位置、ホクロですら自由自在にできるのに、",
                "いざ自分自身の生身の体となると気に入らない部位ばかりが目立ち、何となくしっくりこない"),
            nocht.think("――それらの視線はただの気の所為、考え過ぎかも知れない",
                "でもそういう何かの存在を、恐怖のようなものではなく、人ではない、何か超常的な存在というものを感じることはないだろうか"),
            _.do("程々のところで洗面台を引き上げ、次は上着を選ぶ",
                "カッティングの大きなＶ字の黒かグレィかブルーといった地味なものしか持ち合わせがない",
                "シャツも精々ストライプな柄物があるくらいで、あとはパステルカラーのシンプルなものだけだ",
                "パーカーはイエローにカーキ色、モスグリーン等あるが、彼女にとって好印象を与えるとは思えなかった"),
            _.think("――そういえばそちらの文化でヨウカイというものがあると聞いている",
                "幽霊なのか妖精なのかよく分からない異形の怪物のことか知らないが、",
                "そういったよく分からないが存在を感じる何か、というものについて、きっと神や天使と呼んでいるんだよ"),
            _.do("下着のシャツまで一旦脱いでしまうと、首から掛けた黒のロザリオが白い肌によく映えた",
                "一度そのまま自分を撮影してみて、いきなりこれを送りつけたら彼女はどんな反応をするだろうかと想像してみる",
                "その考えは数秒で霧散し、彼女の目が冷たく自分を見るのが容易に瞼に浮かんだ"),
            _.think("――$meはね、$asahi",
                "そういう存在に見守られていると感じているんだ",
                "その存在をどう呼べば良いか分からないからとりあえず神と呼んでいる",
                "だから$meにとっては宗教とか無神論有神論とかという話じゃなく、",
                "自分の人生の一部みたいなものなんだよ"),
            _.do("結局ブラウンのジャケットを着込んで少し小難しい顔をして自分を撮った",
                    "胸元にグレィと白の淡い柄物シャツが見えるけれど、普段着っぽくてこの方が良いだろう",
                    "それを彼女に送ると、外に出た"),
            stage=w.on_apart,
            time=w.at_afternoon,
            )

def sc_confession(w: World):
    nocht, asahi = W(w.nocht), W(w.asahi)
    erucco = W(w.erucco)
    return w.scene("告白",
            w.symbol("　　　　１１"),
            nocht.come("#教会にやってきている"),
            _.do("ロザリオを取り出してそれを両手で握り、膝を突いて目を閉じる",
                "教会ではいつも物言わぬマリア像が出迎えてくれる", "孤児院で最初に見た時は「このお姉さんは誰？」と院長に尋ねたそうだ",
                "その院長はウォッカで酔いつぶれて冬の海に飛び込んだ",
                "どんなに真摯に神に仕えていても簡単に見捨てるものだという学びになった"),
            _.think("心の中の波が静まると、$Sは目を開ける",
                "$erucco神父は眠そうに欠伸を噛み殺し、台に肩肘を突いて聖書を開いていた"),
            erucco.be(),
            nocht.talk("終わったよ"),
            erucco.talk("珍しい時間に来るものだから何事かと思いましたよ"),
            _.do("そう笑いかけながらも神父はリラックスした様子のままだ"),
            nocht.talk("あの、いいか？"),
            erucco.talk("ああ、そうですか", "分かりました", "先に入って準備していて下さい"),
            _.do("神父は告解室に向かった$CSを見送りながら、台のところに隠してあった栄養ドリンクの小瓶を取り出し、それを煽った",
                "それから頭を二度、三度と振ると、ゆっくりとした足取りで$CSの入った対面の部屋のドアを開ける"),
            nocht.talk("神様に女心について尋ねるのもあれだが、どうだろう",
                "そろそろ関係を進展させる為の何かアクションが必要だと思うんだ"),
            erucco.talk("その前に、まず神の声にあなたの心を開いて下さいませんかね、$nochtさん"),
            nocht.talk("$meはいつだって神に対して心は全開だからいいんだよ",
                "それよりここまで小さなやり取りを積み重ねてきてお互いの紹介はもう充分だと思うんだ",
                "けど今のままじゃ$meは自分の本当の気持ちに嘘をつきながら彼女と接していかなきゃならない"),
            erucco.do("$Sは小さな溜息を零してから「それで」と促す"),
            nocht.talk("告白をしようと思う"),
            erucco.talk("$nocht", "いつも言っていますが人間関係というのは自分がいて、相手がいて、その間に見えない糸が繋がっています",
                "けれどその糸というのは切れやすく、またふとしたことで絡まり合い、元のように真っ直ぐにぴんと張ることはできなくなる",
                "そういう難しいものです",
                "だから常に相手のことを考え、その気持ちを慮り、慎重に接することを求められるのですよ"),
            nocht.talk("それはそうかも知れないが、いつまでも今の状態でステイしていたら$meは自分の本心を隠して愛想笑いをしながら彼女と付き合っていかなきゃならないんだ",
                "でもそんな上辺ばかりの言葉でやり取りして本当の人間関係って築けるのか？",
                "今なら大丈夫な気がするんだ", "彼女の心も自分に向かって開いてくれていると感じる",
                "その今こそ、もう一歩親密になる為に本当の言葉を、気持ちを、伝えるべきなんじゃないのか？"),
            _.do("声が荒くなり、思わず足元の板を蹴りつける"),
            erucco.do("それに対して咳払いで注意をしてから、神父はこう説いた"),
            _.talk("それについて相手の女性と話したことはありますか？",
                "ないでしょう？"),
            nocht.talk("それは……だってさ"),
            erucco.talk("自分の気持ちしか、そこには存在していないんじゃないですか？",
                "相手の気持ちのことは全く考えていないでしょう？",
                "それをエゴと呼ぶのです",
                "それに気づいたから、今あなたはこうして告解を受けている訳じゃないですか？"),
            nocht.hear("神父の声が耳に心地よく響くのに、気持ちは痛みを覚えていた"),
            erucco.talk("その本当の気持ちを、伝えたい気持ちを、それでも彼女に伝えるべきなのかどうか",
                "今一度考えてみてはいかがですかな"),
            nocht.talk("わかり、ましたよ"),
            _.do("それだけ答え、$Sは部屋を出た"),
            stage=w.on_church,
            day=w.in_confession, time=w.at_afternoon,
            )

def sc_confessher(w: World):
    nocht, asahi = W(w.nocht), W(w.asahi)
    frank = W(w.frank)
    return w.scene("彼女への告白",
            w.comment("フィンランドと日本の時差は７時間"),
            w.symbol("　　　　１２"),
            nocht.be("#外を歩いている"),
            _.do("珍しく晴れ間が見え、日差しが暖かい",
                "それでも日や地域によっては早いところで雪が見られることもある",
                "吹き抜けていく風に歩道で立ち止まった女性が首を竦めていた"),
            nocht.do("$Sは端末を取り出して$w_japanの時刻を確認する",
                "彼女の世界は既に昼を過ぎてしまっていて、少し眠気に襲われている頃だろうか",
                "今日の昼食は何を食べたの？　とシンプルな質問だけをメッセージにして送ってみる"),
            _.do("自転車を押して歩きながら筋状の雲が流れる空を見上げた",
                "神父の言葉が何度も自分の気持ちを押し止めようとするが、それに抗いたくなる部分もまた存在して、",
                "そのせめぎあいは吐息となって街の空気に滲んでいく"),
            _.do("交差点を渡り、スーパーの駐輪場へと入る", "&"),
            frank.be("警備員の$frankが誘導棒をこっちに向けてその髭面を歪ませる", "&"),
            nocht.do("珍しい時間帯に現れたものだから仕事をクビになったとでも思っているのだろうか",
                "何でもないよ、と手でその疑問を振り払い、玄関口を逸れて軒下で壁に背を預けた"),
            asahi.voice("今日は少し忙しかったから昼食はまだよ",
                "普段もほとんど食べないけれど、それでも軽くタブレットや栄養バーで済ますわね",
                "必要ならそれにサプリでも取れば良いだけだし",
                "食べすぎると頭の働きが悪くなって仕事に支障が出るのよ"),
            nocht.do("彼女からの返信はいつも通りだ", "その飾り気のない本心の透けて見える言葉が、好きだった"),
            nocht.think("――全く、噂には聞いていたけれど君たち$w_japaneseというのは勤勉すぎるよ",
                "食は人生の楽しみの一つじゃないか",
                "確かに英国に次いで食べ物がまずいと言われるこの国の人間の$meが言えたもんじゃないかも知れないが"),
            nocht.do("彼女の返信の中に、$S自身の写真を送ったことに対しての言及はまだ見つけられない",
                "添付画像を見ていないということもあるだろうけれど、それよりは無視、あるいは特に言葉はなかったという可能性の方が高いだろう",
                "それでも一言くらいは、何か欲しい",
                "少し考え、あれから更に男性を一人描き加えたオーロラの美女のスケッチ画像を送り、その感想を求めてみる"),
            asahi.voice("隣の人物はあなた？"),
            nocht.think("――ああ、そうだ",
                "前に言っただろう？", "いつか二人で一緒にオーロラを見ようと",
                "今回は見に行けなかったからその代わりと思ってね"),
            asahi.voice("女性は空の光を見ているのに、男性の方は彼女のことしか見ていないのね",
                "これでは一緒にオーロラを見ていることにはならないんじゃない？"),
            nocht.think("――男にとっては彼女こそがオーロラそのものだ、ということなんじゃないかな"),
            asahi.voice("それなら女性の方はそれに気づいていない訳だから、これは悲しい絵になるわね"),
            nocht.think("彼女の返信を見て、$Sは逡巡する",
                "言葉を続けるべきなのか、それとも神父の忠告に従うべきなのか"),
            _.do("警備員の$frankが駐車場を出ていく手押し車の老婆に何やら陽気な声を掛けている",
                "街が自分の思いとは無関係に生きている証拠だ",
                "それなら今ここで自分が消えたところで何も変わらない"),
            nocht.think("――$asahi、", "$meは君が好きだ"),
            _.do("それに対する返信は、$frankに見送られた手押し車の老婆がゆるゆると歩道を進み、横断歩道を渡り切り、向こうの狭い路地にすっかり姿を消してしまって、",
                "それと入れ替わるように配送のトラックがバックランプを点灯させながら駐車場へと入ってきたのをぼんやりと見つめている時に、戻ってきた"),
            asahi.voice("もう、お酒入っているの？"),
            nocht.think("――今日はまだ飲んでない",
                "これは真面目な話なんだ"),
            nocht.do("ボタンを押す手が震える",
                "今までと違い、言葉、単語の一つ一つが細い糸の上を綱渡りするような、そんな繊細さと度胸を求められている気がして、",
                "喉がひっつくような乾きと動悸を覚えた"),
            nocht.think("――君に褒められたあの日、$meはやっと出会えたと思えたんだ",
                "それまではバカにされるか見て見ぬふりをされるだけだった自分を、自分の絵を、やっと認めてくれる人が現れたんだって",
                "でも君と言葉を交わしているうちに、それこそが勘違いだったと気づいたよ",
                "$meはさ、認めてくれる人じゃなく、自分と向き合ってくれる人を探していただけなんだって",
                "それが君なんだ、$asahi",
                "いつか君の住む国に行きたい",
                "君の世界を見て、一緒に笑って、同じ空気を吸って、可能ならば、君の国のオーロラを二人で見たい",
                "君と愛し合いたいんだ"),
            _.do("一気に綴った感情そのものの言葉だった",
                    "$frankが何をしているのだろうという風に何度かこっちを見ているが、いちいち気にしていられない",
                    "言った", "言ってやったぞ", "という感情の昂りをどうすることもできず、",
                    "$Sは端末を両手で握り、天に、いや、神に祈った"),
            _.do("けれど彼女にとっては十分程度の時間が必要だったようだ"),
            asahi.voice("自分が何を言っているか分かっているの？"),
            nocht.do("それを見て$Sは慌てて返信する"),
            nocht.think("――分かってる",
                    "けどずっと考えていたことなんだ",
                    "やり取りをしながら心のどこかでいつも君への想いが引っかかっていた",
                "この気持ちを、愚かだと笑うだろうか？", "いや、君はそんなことしないだろう",
                "そういう女性だと、$meは知っている"),
            asahi.voice("ごめんなさい",
                    "$meは……あなたとは会えない"),
            nocht.do("その言葉を最後に、彼女からの通信は途絶えた"),
            _.do("それから何度メッセージを送っても、端末は返信を受け取ることはなかったのだ"),
            stage=w.on_street,
            )

## episode
def ep_heartbreak(w: World):
    return w.episode("2-4.失恋",
            sc_lookingaurora(w),
            sc_confession(w),
            sc_confessher(w),
            ## NOTE
            ##  - オーロラの観測ができなかったが、ノクトはアサヒに今までの思いを伝える
            ##  - 思い切ってノクトはアサヒに思いを伝えた
            ##  - しかし彼女からは「ごめんなさい」という返事がきて、それ以降連絡が途絶えてしまった
            note="結局オーロラは見られず、それでも諦められずに$nochtは$asahiに告白をする。しかしその答えは")
